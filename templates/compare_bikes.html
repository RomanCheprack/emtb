﻿{% extends "layout.html" %}
{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='styles/compare_bikes.css') }}">
<script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.js"></script>


<h2 class="mb-4 text-center">השוואת אופניים</h2>
<div class="col-12 col-md-3 mb-3 d-flex align-items-end gap-2">
    <div>
        <a href="{{ url_for('bikes') }}" class="btn btn-outline-secondary mt-3">חזור לדף הראשי</a>

    </div>
</div>


{% if bikes and bikes|length > 0 %}
<div class="row row-cols-1 row-cols-md-{{ bikes|length }} g-4">
    {% for bike in bikes %}
    <div class="col-6 col-md-4 mb-4">
        <div class="card h-100 text-center">
            <img src="{{ bike['Image URL'] }}" class="card-img-top" alt="{{ bike['Model'] }}">
            <div class="card-body">
                <h4 class="card-firm">{{bike['Firm']}}</h4>
                <p class="card-title">{{ bike['Model'] }}</p>
                <h6 class="card-text-price">מחיר: {{ bike['Price'] }}</h6>
                <p class="card-text-year">שנה: {{ bike['Year'] }}</p>
                <a href="{{ bike['Product URL'] }}" class="btn btn-primary mt-2" target="_blank">לפרטים</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}


<div class="alert alert-info text-center">
    לא נבחרו אופניים להשוואה.
</div>
{% endif %}

<div dir="rtl" class="container mt-4" id="ai-comparison-container" style="display: none;">
    <h2 class="mb-3 text-center">השוואת מומחה 🤖</h2>

    <div id="ai-intro" class="mb-3 fs-5 text-center"></div>

    <div class="bg-light rounded p-3 mb-4">
        <h4>🏆 ההמלצה שלנו</h4>
        <p id="ai-recommendation" class="fw-bold"></p>
    </div>

    <div class="mb-4">
        <h4>📊 טבלת השוואה</h4>
        <div class="table-responsive">
            <table class="table table-bordered" id="ai-comparison-table">
                <thead class="table-light">
                    <tr id="comparison-header-row"></tr>
                </thead>
                <tbody id="comparison-body-rows"></tbody>
            </table>
        </div>
    </div>


    <div class="mb-4" id="ai-bike-analysis"></div>

    <div class="alert alert-info text-center" id="ai-expert-tip" role="alert"></div>
</div>
<script src="{{ url_for('static', filename='js/compare_bikes.js') }}"></script>

{% endblock %}